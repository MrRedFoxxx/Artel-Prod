# Настройка OAuth для Яндекс

## Миграция базы данных

Перед использованием OAuth необходимо обновить структуру базы данных:

```bash
python migrate_db.py
```

Этот скрипт добавит необходимые поля для OAuth аутентификации.

## Настройка Яндекс OAuth

1. Перейдите на https://oauth.yandex.ru/client/new
2. Создайте новое приложение:
   - Название: любое
   - Платформа: Веб-сервисы
   - Callback URL: `http://your-domain.com/auth/yandex/callback`
   - Права: "Доступ к email пользователя"
3. Скопируйте `ID приложения` и `Пароль`

## Настройка переменных окружения

Создайте файл `.env` в корне проекта (скопируйте из `env_example.txt`):

```env
YANDEX_CLIENT_ID=your_yandex_client_id
YANDEX_CLIENT_SECRET=your_yandex_client_secret
YANDEX_REDIRECT_URI=http://your-domain.com/auth/yandex/callback
```

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск сервера

```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

## Тестирование

1. Откройте страницу курса
2. Нажмите "ВХОД" или "РЕГИСТРАЦИЯ"
3. Выберите "Войти через Яндекс" или "Зарегистрироваться через Яндекс"
4. Авторизуйтесь через Яндекс
5. После успешной авторизации вы будете перенаправлены на страницу курса

## Примечания

- Для локальной разработки используйте `http://localhost:8000` вместо `http://your-domain.com`
- Убедитесь, что ваш сервер доступен по HTTPS в продакшене
- Яндекс требует HTTPS для callback URL в продакшене
- OAuth пользователи не могут входить по паролю - только через OAuth 